


const _0x42fa77=_0x4b8c;(function(_0x46094d,_0x8224e3){const _0x2ae678=_0x4b8c,_0x480f30=_0x46094d();while(!![]){try{const _0x1b6813=parseInt(_0x2ae678(0xf3))/0x1*(parseInt(_0x2ae678(0xe4))/0x2)+parseInt(_0x2ae678(0xec))/0x3*(parseInt(_0x2ae678(0xe1))/0x4)+parseInt(_0x2ae678(0xe9))/0x5*(parseInt(_0x2ae678(0xf1))/0x6)+-parseInt(_0x2ae678(0xe3))/0x7+-parseInt(_0x2ae678(0xed))/0x8*(parseInt(_0x2ae678(0xef))/0x9)+parseInt(_0x2ae678(0xf9))/0xa+parseInt(_0x2ae678(0xe7))/0xb*(-parseInt(_0x2ae678(0xf4))/0xc);if(_0x1b6813===_0x8224e3)break;else _0x480f30['push'](_0x480f30['shift']());}catch(_0x3af7f9){_0x480f30['push'](_0x480f30['shift']());}}}(_0x484a,0xce0ae),require('dotenv')[_0x42fa77(0xf6)]());function _0x4b8c(_0x15610e,_0x2eea84){const _0x484ab2=_0x484a();return _0x4b8c=function(_0x4b8c2d,_0xaf8fd3){_0x4b8c2d=_0x4b8c2d-0xdc;let _0x18f501=_0x484ab2[_0x4b8c2d];return _0x18f501;},_0x4b8c(_0x15610e,_0x2eea84);}const {Pool}=require('pg'),s=require('../set'),dbUrl=s['DATABASE_URL']?s[_0x42fa77(0xe6)]:_0x42fa77(0xf0),proConfig={'connectionString':dbUrl,'ssl':{'rejectUnauthorized':![]}},pool=new Pool(proConfig);async function createUsersRankTable(){const _0x4032e3=_0x42fa77,_0x38b877=await pool[_0x4032e3(0xdd)]();try{await _0x38b877[_0x4032e3(0xdc)](_0x4032e3(0xfa));}catch(_0x3b142a){console[_0x4032e3(0xe0)](_0x4032e3(0xf5),_0x3b142a);}finally{_0x38b877[_0x4032e3(0xe8)]();}}async function ajouterOuMettreAJourUserData(_0x55db83){const _0xa46577=_0x42fa77,_0x1ad16c=await pool[_0xa46577(0xdd)]();try{const _0x305c87=await _0x1ad16c[_0xa46577(0xdc)]('SELECT\x20*\x20FROM\x20users_rank\x20WHERE\x20jid\x20=\x20$1',[_0x55db83]),_0x1f9ca5=_0x305c87[_0xa46577(0xde)][_0xa46577(0xe2)]>0x0;_0x1f9ca5?await _0x1ad16c[_0xa46577(0xdc)](_0xa46577(0xe5),[_0x55db83]):await _0x1ad16c[_0xa46577(0xdc)](_0xa46577(0xee),[_0x55db83,0xa,0x1]);}catch(_0x34b661){console[_0xa46577(0xe0)](_0xa46577(0xea),_0x34b661);}finally{_0x1ad16c[_0xa46577(0xe8)]();}}function _0x484a(){const _0x337946=['exports','Erreur\x20lors\x20de\x20la\x20récupération\x20des\x20données\x20de\x20l\x27utilisateur:','15308040ebXakk','\x0a\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20users_rank\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20id\x20SERIAL\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20jid\x20VARCHAR(255)\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20xp\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20\x20\x20messages\x20INTEGER\x20DEFAULT\x200\x0a\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20','query','connect','rows','Erreur\x20lors\x20de\x20la\x20récupération\x20du\x20bottom\x2010\x20des\x20utilisateurs:','error','1396YajGRa','length','2288958XGMKbX','1131052JLIUvL','UPDATE\x20users_rank\x20SET\x20xp\x20=\x20xp\x20+\x2010,\x20messages\x20=\x20messages\x20+\x201\x20WHERE\x20jid\x20=\x20$1','DATABASE_URL','77oVzibI','release','69490zDEFpw','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20des\x20données\x20de\x20l\x27utilisateur:','SELECT\x20jid,\x20xp\x20,\x20messages\x20FROM\x20users_rank\x20ORDER\x20BY\x20xp\x20DESC\x20LIMIT\x2010','8037QDYACh','10050224fozxMT','INSERT\x20INTO\x20users_rank\x20(jid,\x20xp,\x20messages)\x20VALUES\x20($1,\x20$2,\x20$3)','9tofzcd','postgres://db_7xp9_user:6hwmTN7rGPNsjlBEHyX49CXwrG7cDeYi@dpg-cj7ldu5jeehc73b2p7g0-a.oregon-postgres.render.com/db_7xp9','378DetAcK','SELECT\x20messages,\x20xp\x20FROM\x20users_rank\x20WHERE\x20jid\x20=\x20$1','1FACLzp','2536548hgpDTZ','Erreur\x20lors\x20de\x20la\x20création\x20de\x20la\x20table\x20users_rank:','config'];_0x484a=function(){return _0x337946;};return _0x484a();};async function getMessagesAndXPByJID(_0x240b51){const _0x3a89d1=_0x42fa77,_0x346edb=await pool['connect']();try{const _0x1c0306=await _0x346edb['query'](_0x3a89d1(0xf2),[_0x240b51]);if(_0x1c0306['rows'][_0x3a89d1(0xe2)]>0x0){const {messages:_0xd6beaf,xp:_0x334a5f}=_0x1c0306[_0x3a89d1(0xde)][0x0];return{'messages':_0xd6beaf,'xp':_0x334a5f};}else return{'messages':0x0,'xp':0x0};}catch(_0xf8c279){return console[_0x3a89d1(0xe0)](_0x3a89d1(0xf8),_0xf8c279),{'messages':0x0,'xp':0x0};}finally{_0x346edb[_0x3a89d1(0xe8)]();}}async function getBottom10Users(){const _0x3e9092=_0x42fa77,_0x1eed44=await pool[_0x3e9092(0xdd)]();try{const _0x43e84e=await _0x1eed44[_0x3e9092(0xdc)](_0x3e9092(0xeb));return _0x43e84e[_0x3e9092(0xde)];}catch(_0x4734e9){return console[_0x3e9092(0xe0)](_0x3e9092(0xdf),_0x4734e9),[];}finally{_0x1eed44[_0x3e9092(0xe8)]();}}createUsersRankTable(),module[_0x42fa77(0xf7)]={'ajouterOuMettreAJourUserData':ajouterOuMettreAJourUserData,'getMessagesAndXPByJID':getMessagesAndXPByJID,'getBottom10Users':getBottom10Users};


